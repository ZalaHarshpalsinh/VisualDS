var VisualDS=function(t){"use strict";class e{constructor(){this.x=0,this.y=0,this.width=0,this.height=0,this.customCoordinates=!1}setCoordinates(t,e){this.x=t,this.y=e}getCoordinates(){return{x:this.x,y:this.y}}addInPool(){t.animator.addInPool(this)}addAnimation(e,i){const a={toState:e,params:i,entity:this};t.animator.addAnimation(a)}changeState(t,e){}nextAnimation(){t.animator.nextAnimation()}update(t){}draw(){}}const i=800,a=600,s=1e3,h=750,r=10,n=90,o=20,d=5,c=5,l=10,x="CornflowerBlue",u=50;function p(e,i,a,s,h,r){t.ctx.save(),t.ctx.fillStyle=h,t.ctx.fillRect(e,i,a,s),t.ctx.strokeStyle=r,t.ctx.strokeRect(e,i,a,s),t.ctx.restore()}function w(e,i,a,s,h,r,n){t.ctx.save(),t.ctx.font=s,t.ctx.fillStyle=h,t.ctx.textAlign=r,t.ctx.textBaseline=n,t.ctx.fillText(e,i,a),t.ctx.restore()}class g extends e{constructor(t,e=!1){super(),this.val=t,this.calculateDimensions(),this.customCoordinates=e,super.addInPool(),this.color=x}calculateDimensions(){this.text=this.val.toString().split("\n");let e=0;this.text.forEach((i=>{e=Math.max(e,t.ctx.measureText(i).width)})),this.width=e+2*d,this.height=this.text.length*l+2*c}changeColor(t){this.color=t}draw(){p(this.x,this.y,this.width,this.height,this.color,"black");let t=this.x,e=this.y+c;this.text.forEach((i=>{w(i,t+this.width/2,e+l/2,"10px serif","black","center","middle"),e+=l}))}}class m{constructor(t,e){this.states=t||{},this.currentState=t[e]()}change(t,e){this.currentState.exit(),this.currentState=this.states[t](),this.currentState.enter(e)}update(t){this.currentState.update(t)}draw(){this.currentState.draw()}}class y{constructor(){}enter(t){}exit(){}update(t){}draw(){}}class v extends y{constructor(t){super(),this.varray=t}draw(){this.varray.drawBoxes()}}class b extends y{constructor(t){super(),this.varray=t}enter(t){this.data=t,"box_color_change"==this.data.type&&this.data.indices.forEach((t=>{t<this.varray.length()&&this.varray.drawData[t].changeColor(this.data.toColor)})),this.varray.changeState("idle"),this.varray.nextAnimation()}}class f extends y{constructor(t){super(),this.varray=t}enter(t){let{i:e,j:i}=t,a=this.varray.drawData[e];this.varray.drawData[e]=this.varray.drawData[i],this.varray.drawData[i]=a,a=this.varray.drawData[e].getCoordinates(),this.varray.drawData[e].setCoordinates(this.varray.drawData[i].getCoordinates().x,this.varray.drawData[i].getCoordinates().y),this.varray.drawData[i].setCoordinates(a.x,a.y),this.varray.changeState("idle"),this.varray.nextAnimation()}}class D extends y{constructor(t){super(),this.pointer=t}draw(){this.pointer.drawArrow()}}class S extends y{constructor(t){super(),this.pointer=t,this.change=0}enter(t){this.change=t.change,this.targetX=this.pointer.x+this.change*this.pointer.pointee.boxWidth}update(t){this.pointer.x<this.targetX?this.pointer.x=Math.min(this.pointer.x+u*t,this.targetX):this.pointer.x>this.targetX?this.pointer.x=Math.max(this.pointer.x-u*t,this.targetX):(this.pointer.changeState("idle"),this.pointer.nextAnimation())}draw(){this.pointer.drawArrow()}}class C extends e{constructor(t,e){super(),this.customCoordinates=!0,super.addInPool(),this.pointee=t,this.index=e,this.updateCoords(),this.stateMachine=new m({idle:()=>new D(this),moving:()=>new S(this)},"idle")}update(t){this.stateMachine.update(t)}drawArrow(){w("â†‘",this.x,this.y,"16px Arial","red","center","top")}draw(){this.stateMachine.draw()}changeState(t,e){this.stateMachine.change(t,e)}updateCoords(){this.x=this.pointee.x+this.pointee.boxWidth/2+this.index*this.pointee.boxWidth,this.y=this.pointee.y+this.pointee.boxHeight}getIndex(){return this.index}move(t){if(this.index+t<0||this.index+t>=this.pointee.data.length)throw new Error("Index out of bound");this.index+=t,super.addAnimation("moving",{change:t})}moveTo(t){this.move(t-this.getIndex())}increment(){this.move(1)}decrement(){this.move(-1)}}class A{constructor(){this.brushX=r,this.brushY=n,this.dsPool=[],this.animationQueue=[],this.state="idle"}addInPool(t){t.customCoordinates||(t.setCoordinates(this.brushX,this.brushY),this.brushY+=t.height+o),this.dsPool.push(t)}addAnimation(t){this.animationQueue.push(t)}nextAnimation(){setTimeout((()=>this.state="idle"),250)}drawHeader(){p(0,0,i,50,"DarkSlateGrey","red"),w("Data Structure Visualizer",i/2,25,"bold 32px serif","white","center","middle")}update(t){if("idle"==this.state){let t=this.animationQueue.shift();void 0!==t&&(t.entity.changeState(t.toState,t.params),this.state="animating")}this.dsPool.forEach((e=>{e.update(t)}))}draw(){this.drawHeader(),this.dsPool.forEach((t=>{t.draw()}))}}let M=null;t.ctx=null,t.animator=null;let P=0;function _(e){let i=(e-P)/1e3;P=e,function(e){t.animator.update(e)}(i),t.ctx.clearRect(0,0,M.width,M.height),t.animator.draw(),requestAnimationFrame(_)}return t.BaseState=y,t.Entity=e,t.Pointer=C,t.StateMachine=m,t.createVisualisation=function(e,r){M=document.getElementById(e),t.ctx=M.getContext("2d"),t.animator=new A,M.width=s,M.height=h,t.ctx.scale(s/i,h/a),r(),requestAnimationFrame(_)},t.drawRectangle=p,t.drawText=w,t.vArray=class extends e{constructor(t){super(),this.data=[],this.drawData=[],this.boxWidth=0,this.boxHeight=0;for(let e=0;e<t.length;e++)this.data.push(t[e]),this.drawData.push(new g(t[e],!0)),this.boxWidth=Math.max(this.boxWidth,this.drawData[e].width),this.boxHeight=Math.max(this.boxHeight,this.drawData[e].height);this.width=this.length()*this.boxWidth,this.height=this.boxHeight,super.addInPool();let e={x:this.x,y:this.y};for(let t=0;t<this.length();t++)this.drawData[t].setCoordinates(e.x,e.y),this.drawData[t].width=this.boxWidth,this.drawData[t].height=this.boxHeight,e.x+=this.boxWidth;this.stateMachine=new m({idle:()=>new v(this),property_change:()=>new b(this),swap:()=>new f(this)},"idle")}update(t){this.stateMachine.update(t)}drawBoxes(){this.drawData.forEach((t=>{t.draw()}))}draw(){this.stateMachine.draw()}changeState(t,e){this.stateMachine.change(t,e)}length(){return this.drawData.length}at(t){return this.data[t]}highlight(t,e="blue"){const i={type:"box_color_change",indices:t,toColor:e};super.addAnimation("property_change",i)}unhighlight(t){const e={type:"box_color_change",indices:t,toColor:x};super.addAnimation("property_change",e)}swap(t,e){let i=this.data[t];this.data[t]=this.data[e],this.data[e]=i;const a={i:t,j:e};super.addAnimation("swap",a)}getPointer(t){return new C(this,t)}},t.vElement=g,Object.defineProperty(t,"__esModule",{value:!0}),t}({});
